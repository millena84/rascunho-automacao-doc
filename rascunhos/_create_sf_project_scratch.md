# üß∞ init_project.md - Cria√ß√£o/Uso de Scratch Org para desenvolvimento Salesforce

### üîñ Vers√µes
| Vers√£o | Data | Descri√ß√£o |
|--------|------------|------------------------------------|
| v01 | 01/05/2025 | Cria√ß√£o do passo a passo inicial |
| v02 | 02/05/2025 | Ajustes de orienta√ß√£o, checagem de erros e corre√ß√µes |
| v03 | 03/05/2025 | Explica√ß√£o de fallback para `master` e orienta√ß√£o sobre abertura da org |


üìÖ Vers√£o do script: `v10.0.0`  
üìÑ Atualizado em: **02/05/2025**  
üë©‚Äçüíª Ideal para: equipes t√©cnicas ou profissionais individuais que desejam criar ambientes de desenvolvimento automatizados com Salesforce CLI e Git.  

---

### üß±Estrutura do reposit√≥rio clonado

Ap√≥s o clone, ser√° criada na raiz do diret√≥rio do seu projeto salesforce isso aqui:

üå≥ [reposit√≥rio].[https://github.com/millena84/modelo-sf-projeto]
üìÇ_init_project/
‚îú‚îÄ‚îÄ üñ•Ô∏èauth_org_sf.sh [aliasOrg] {futuro}
‚îú‚îÄ‚îÄ ‚öôÔ∏èconfig_init.json
‚îú‚îÄ‚îÄ üñ•Ô∏ècreate_doc_struct.sh [localProjectPath]
‚îú‚îÄ‚îÄ üñ•Ô∏ècreate_proj_scratch_org.sh [aliasOrg;aliasScratchOrg]
‚îú‚îÄ‚îÄ üñ•Ô∏ècreate_project_org.sh [aliasOrg]
‚îú‚îÄ‚îÄ üìÑinit_steps.md
‚îú‚îÄ‚îÄ ‚öôÔ∏èmodel-package.xml
‚îî‚îÄ‚îÄ ‚öôÔ∏èmodel_project-scratch-def.json

---

## üìù Vis√£o Geral
Este script automatiza a cria√ß√£o de um projeto Salesforce completo com:
- Gera√ß√£o de projeto com template padr√£o
- Substitui√ß√£o de arquivos por templates customizados
- Autoriza√ß√£o do DevHub
- Cria√ß√£o de Scratch Org
- Retrieve de metadados (opcional)
- Importa√ß√£o de dados (opcional)
- Inicializa√ß√£o de reposit√≥rio Git e push para reposit√≥rio remoto
- Abertura da Scratch Org

---

## üö© Premissas

1. Ter usu√°rio no GitHub.
2. Ter uma organiza√ß√£o Salesforce (playground ou Developer Edition):
- Caso deseje usar scratch org, a DevHub deve estar habilitada.
3. Ter o VSCode instalado:
- Criar pasta para projetos VSCode.
- Criar subpasta para projeto Salesforce.
4. Ter um reposit√≥rio Git criado para o projeto Salesforce.
5. Ter Git configurado na m√°quina com Git Bash instalado. 
> Obs: Configure nome e email do Git (se ainda n√£o configurado):
    
    git config --global user.name "Seu Nome"
    git config --global user.email "seu@email.com"  

---

## üë£ Passo a Passo

### Lista:

1. Abrir o VSCode na pasta do projeto Salesforce.
2. Clonar o reposit√≥rio: `git clone URL_REPO_AQUI`
3. Configurar arquivos essenciais:
-  `config_init.json` (obrigat√≥rio)
-  `model_project-scratch-def.json` (se usar scratch org)
-  `model_package.xml` (se usar retrieve/deploy)

4. Executar os scripts:

-  `create_proj_scratch_org.sh` ‚Üí cria projeto, autoriza org e scratch org.

---
 

### üîç Visual 

üö© Premissas:
[ 0.1 - Criar usu√°rio GitHub - web ]
			‚¨áÔ∏è
[ 0.2 - Criar organiza√ß√£o Salesforce - web ]
			‚¨áÔ∏è
[ 0.2.1 - Autorizar DevHub - web ]
			‚¨áÔ∏è
[ 0.3 - Instalar VSCode - web/terminal ]
			‚¨áÔ∏è
[ 0.3.1 - Criar pasta de projetos ]
			‚¨áÔ∏è
[ 0.3.2 - Criar pasta do projeto SF - local/terminal ]
			‚¨áÔ∏è
[ 0.4 - Criar reposit√≥rio Git - web ]
			‚¨áÔ∏è
[ 0.5 - Instalar Git Bash e configurar Git - terminal ]

üë£ Passos:
[ 1 - Abrir VSCode na pasta do projeto SF ]
			‚¨áÔ∏è
[ 2 - Clonar reposit√≥rio modelo ]
			‚¨áÔ∏è
[ 3 - Configurar arquivos ]
			‚¨áÔ∏è
[ 4.1 - config_init.json ]
			‚¨áÔ∏è
[ 4.2 - model_project-scratch-def.json ]
			‚¨áÔ∏è
[ 4.3 - model_package.xml ]
			‚¨áÔ∏è
[ 5.1 - Executar create_proj_scratch_org.sh ]
			‚¨áÔ∏è
[ 5.2 - Executar create_project_org.sh ]
			‚¨áÔ∏è
[ 5.3 - executar create_doc_struc.sh ]  üîö




### ‚öôÔ∏èSobre as configura√ß√µes
#### 4.1. Configurar: config_init.json
Essas informa√ß√µes ser√£o usadas nos scripts de cria√ß√£o dos ambientes.

    {
	    "orgAlias": "Alias da sua organizacao",
	    "scratchOrgAlias": "Alias da sua scratch org",
	    "defaultBranchGit": "B0001-v00-project-structure",
	    "manifestPath": "manifest/package.xml",
	    "scratchDefPath": "config/project-scratch-def.json",
	    "urlGitProject": "https://github.com/millena84/modelo-sf-projeto.git"
    }
 

### 4.2. Configurar: model_project-scratch-def.json
#### O que √© esse arquivo?
O arquivo usado de refer√™ncia para criar/definir que funcionalidades voc√™ quer dispon√≠vel na sua Scratch Org.

#### O que significam os campos?
| Recurso (Feature/Setting) | Descri√ß√£o |
|:----------------------------|:--------------------------------------------------------------------------------|
| AuthorApex | Permite o uso de Apex na org (c√≥digo personalizado). |
| API | Habilita acesso √† API do Salesforce para integra√ß√£o. |
| Communities | Ativa o Experience Cloud (antigo Communities). |
| ContactsToMultipleAccounts | Permite relacionar um contato a v√°rias contas. |
| DebugApex | Permite a depura√ß√£o (debug) de c√≥digo Apex. |
| DevelopmentWave | Recursos antigos do Wave Analytics (CRM Analytics). |
| MarketingUser | Flag de permiss√£o para uso de recursos de marketing (exige configura√ß√£o extra). |
| MultiCurrency | Permite m√∫ltiplas moedas na organiza√ß√£o. |
| PersonAccounts | Ativa uso de contas do tipo pessoa f√≠sica. |
| PlatformEncryption | Ativa criptografia em n√≠vel de plataforma. |
| RecordTypes | Habilita uso de tipos de registro nos objetos. |
| ServiceCloud | Flag gen√©rica para funcionalidades do Service Cloud. |
| StateAndCountryPicklist | Ativa listas de sele√ß√£o para estado/pa√≠s. |
| Workflow | Ativa uso de regras de workflow. |
| EnableSetPasswordInApi | Permite definir senha via API. |
| BatchManagement | Permite gerenciamento de lotes (em jobs ass√≠ncronos). |
| FieldAuditTrail | Mant√©m hist√≥rico completo de altera√ß√µes em campos (recurso premium). |
| SalesCloudEinstein | Ativa funcionalidades do Sales Cloud Einstein. |
| DevOpsCenter | Ativa o Salesforce DevOps Center. |
| ForceComPlatform | Core da plataforma Salesforce para uso de apps e objetos. |
| CustomNotificationType | Permite definir tipos de notifica√ß√µes customizadas. |
| Chatbot | Ativa o Einstein Bot (Chatbot em canais digitais). |
| CaseClassification | Ativa classifica√ß√£o de casos com AI. |
| SharedActivities | Permite atividades (eventos/tarefas) compartilhadas com v√°rios contatos. |
| Knowledge | Ativa o uso do objeto Knowledge (base de conhecimento). |
| Sites | Ativa o uso do recurso de Sites p√∫blicos. |
| FlowSites | Permite execu√ß√£o de flows via Sites. |
| Functions | Ativa Salesforce Functions (fun√ß√µes serverless). |
| Entitlements | Ativa recursos de SLA e gerenciamento de contratos de servi√ßo. |
| PipelineInspection | Recurso de an√°lise de pipeline de vendas com Einstein. |
| orgPreferenceSettings | Configura√ß√µes gerais de prefer√™ncias da organiza√ß√£o. |
| apexSettings | Configura√ß√µes relacionadas ao uso do Apex. |
| lightningExperienceSettings | Habilita o Lightning Experience. |
| chatterSettings | Ativa o Salesforce Chatter. |
| flowsSettings | Configura√ß√µes de execu√ß√£o de Flow. |
| securitySettings | Pol√≠ticas de seguran√ßa, como senha m√≠nima. |
| sharingSettings | Configura√ß√µes de modelo de compartilhamento. |
| emailSettings | Configura√ß√µes gerais de e-mail (como Email-to-Case). |
| knowledgeSettings | Configura√ß√µes para ativar e gerenciar o Salesforce Knowledge. |
| opportunitySettings | Configura√ß√µes de Oportunidades, como equipe de vendas. |
| accountSettings | Configura√ß√µes de contas, como times de conta. |
| contactsSettings | Configura√ß√µes de contatos, como m√∫ltiplas contas. |
| mobileSettings | Configura√ß√µes relacionadas a dispositivos m√≥veis. |
| emailAdministrationSettings | Administra√ß√£o de pol√≠ticas de e-mail. |
| languageSettings | Configura√ß√£o do Translation Workbench. |
| customSettings | Permite uso de Custom Settings. |
| caseSettings | Configura√ß√µes de casos e Email-to-Case. |
| serviceCloudSettings | Habilita funcionalidades do Service Cloud. |
| fieldServiceSettings | Ativa funcionalidades do Field Service. |
| dataCloudSettings | Ativa funcionalidades do Salesforce Data Cloud. |
  

#### 4.3. Configurar: model_package.xml
##### O que √© esse arquivo?
O arquivo de refer√™ncia para quando voc√™ for fazer retrieve (tem essa op√ß√£o na cria√ß√£o), voc√™ precisa indicar aqui do que quer fazer retrieve. O mesmo vale para deploy sf via terminal.

##### O que significam os campos?
| Tipo de Metadado (package.xml) | Descri√ß√£o |
|:---------------------------------|:-------------------------------------------------------------------|
| ApexClass | Classes escritas em Apex. |
| ApexComponent | Componentes Visualforce personalizados. |
| ApexPage | P√°ginas Visualforce. |
| ApexTrigger | Triggers Apex ativadas por eventos em objetos. |
| AssignmentRules | Regras de atribui√ß√£o de registros (como Cases). |
| AuraDefinitionBundle | Componentes Aura. |
| AutoResponseRules | Regras de resposta autom√°tica (principalmente para Cases). |
| BusinessProcess | Processos de neg√≥cio vinculados a objetos padr√£o como Opportunity. |
| CallCenter | Configura√ß√µes de Call Center. |
| CustomApplication | Apps personalizados no App Launcher. |
| CustomMetadata | Tipos de metadados personalizados. |
| CustomObject | Objetos customizados. |
| CustomObjectTranslation | Tradu√ß√µes de objetos personalizados. |
| CustomPermission | Permiss√µes personalizadas. |
| CustomSite | Sites p√∫blicos do Salesforce. |
| Dashboard | Pain√©is (Dashboards) criados no sistema. |
| Document | Documentos armazenados na aba 'Documentos'. |
| EmailTemplate | Modelos de e-mail. |
| EscalationRules | Regras de escalonamento (principalmente para Cases). |
| Flow | Automatiza√ß√µes criadas no Flow Builder. |
| GlobalValueSet | Conjuntos de valores globais reutiliz√°veis. |
| Group | Grupos p√∫blicos. |
| HomePageComponent | Componentes de homepage cl√°ssica. |
| HomePageLayout | Layouts de homepage cl√°ssica. |
| Layout | Layouts de p√°gina dos objetos. |
| LightningComponentBundle | Componentes Lightning Web Components (LWC). |
| MatchingRules | Regras de correspond√™ncia (matching). |
| Network | Sites Experience Cloud (antigas comunidades). |
| PermissionSet | Conjuntos de permiss√µes. |
| PermissionSetGroup | Agrupamentos de permission sets. |
| Profile | Perfis de usu√°rio. |
| Queue | Filas de encaminhamento de registros. |
| RecordType | Tipos de registro. |
| RemoteSiteSetting | Dom√≠nios externos aprovados. |
| Report | Relat√≥rios criados no sistema. |
| ReportType | Tipos de relat√≥rio customizados. |
| Role | Fun√ß√µes hier√°rquicas. |
| SharingRules | Regras de compartilhamento. |
| StaticResource | Recursos est√°ticos (JS, CSS, imagens, etc). |
| Translations | Tradu√ß√µes personalizadas. |
| ValidationRule | Regras de valida√ß√£o. |
| Workflow | Regras de Workflow. |
| WorkflowRule | Regra de workflow individual. |
| Weblink | Bot√µes e links customizados. |
 

---

## üíªSobre a cria√ß√£o dos ambientes
### 5.1. Execu√ß√£o shell: create_proj_scratch_org.sh
#### O que esse script faz?
Em linhas gerais, ele faz todas cria√ß√£o do projeto (sfdx/sf), scratch org para desenvolvimento e documenta numa branch inicial do git.

##### Detalhe do que ele cria:
OBS: falta auttorizar dev hub Criar DevHub via Shell

1. Cria projeto SF local no diret√≥rio do arquivo de configura√ß√£o
2. Conecta na org do arquivo de configura√ß√£o
3. Cria scratch org
4. Op√ß√£o de fazer ou n√£o retrieve
5. Op√ß√£o de importar ou n√£o dados
6. Conecta no reposit√≥rio git
7. Cria o arquivo .gitattributes para limpar quebra de linha windows
8. Cria branch para subida da estrutura atual para o repost√≥rio do arquivo de configura√ß√£o
9. Faz todos os tr√¢mites de subida nessa branch:
	1. Aponta para essa branch
	2. Faz stage (git init)
	3. Faz commit com mensagem padr√£o informando a defini√ß√£o da estutura
	4. Faz o push
	5. Volta para a branch master
10. Faz todos os tr√¢mites de merge da branch de cria√ß√£o de ambiente para a master
	1. Aponta para a branch master
	2. Sincroniza local e remoto (git pull)
	3. Faz o merge da branch de cria√ß√£o de ambiente para a master
	4. Faz o commit (?)
	5. Faz o push
	6. Deleta branch de cria√ß√£o de ambiente do git local
11. Abre scratch org criada para manipula√ß√£o.

 #### Como executar?
Passo 1) Na raiz do projeto, rodar no terminal esse comando para dar permiss√£o de execu√ß√£o no script:

    chmod +x create_proj_scratch_org.sh

Passo 2) Executar o script:

     ./create_proj_scratch_org.sh


### 5.2. Execu√ß√£o shell: create_project_org.sh
EM CONSTRU√á√ÉO
 

### 5.3. Execu√ß√£o shell: create_proj_scratch_org.sh
#### O que esse script faz?
Cria a estrutura de diret√≥rios que vai comportar a documenta√ß√£o.

OBS:. s√≥ ser√£o necess√°rio se vc s√≥ trouxe o diret√≥rio _init_project. Se trouxe toda estrutura do repo, j√° contempla esses diret√≥rios

  

## üìÇComo deve ficar a estrutura de diret√≥rios final?
_docs/
‚îú‚îÄ‚îÄ logs/
‚îÇ ‚îú‚îÄ‚îÄ json/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ audit-package-xml.json
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ audit-audit-trails.json
‚îÇ ‚îú‚îÄ‚îÄ md/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ audit-package-xml.md
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ audit-audit-trails.md
‚îú‚îÄ‚îÄ scripts/
‚îÇ ‚îú‚îÄ‚îÄ env/ # vari√°veis de ambiente, configura√ß√µes locais
‚îÇ ‚îú‚îÄ‚îÄ devel/ # scripts para retrieve, an√°lise, diff
‚îÇ ‚îî‚îÄ‚îÄ doc/ # scripts para gerar documenta√ß√£o
‚îú‚îÄ‚îÄ tests/ # (opcional) testes dos scripts de auditoria ou CI
‚îî‚îÄ‚îÄ org/
‚îú‚îÄ‚îÄ obj/
‚îÇ ‚îú‚îÄ‚îÄ custom/ # objetos customizados
‚îÇ ‚îî‚îÄ‚îÄ standard/ # objetos padr√£o (ex: Account, Contact)
‚îú‚îÄ‚îÄ code/
‚îÇ ‚îú‚îÄ‚îÄ class/ # Apex classes
‚îÇ ‚îú‚îÄ‚îÄ trigger/ # Apex triggers
‚îú‚îÄ‚îÄ api/ # NamedCredentials, ExternalServices, mocks
‚îî‚îÄ‚îÄ components/
‚îú‚îÄ‚îÄ aura/ # Aura components
‚îú‚îÄ‚îÄ lwc/ # Lightning Web Components
‚îú‚îÄ‚îÄ vf/ # Visualforce pages e components
‚îî‚îÄ‚îÄ standard/ # componentes padr√£o customizados

_init_project/
‚îú‚îÄ‚îÄ auth_org_sf.sh [config_init.json.prop.aliasOrg {futuro}]
‚îú‚îÄ‚îÄ config_init.json
‚îú‚îÄ‚îÄ create_doc_struct.md [config_init.json.prop.localProjectPath]
‚îú‚îÄ‚îÄ create_proj_scratch_org.sh [config_init.json.prop.aliasOrg;config_init.json.prop.aliasScratchOrg]
‚îú‚îÄ‚îÄ create_project_org.sh [config_init.json.prop.aliasOrg]
‚îú‚îÄ‚îÄ init_steps.md
‚îú‚îÄ‚îÄ model-package.xml
‚îî‚îÄ‚îÄ model_project-scratch-def.json

  

NOTA EXTRA: init_project precisara ser clonada do git dentro de uma pasta de projeto que seria o projeto SF, e na criacao, o comando deve considerar isso

> Documento revisado conforme boas pr√°ticas, com foco em clareza, sequ√™ncia l√≥gica e legibilidade para novos usu√°rios.
